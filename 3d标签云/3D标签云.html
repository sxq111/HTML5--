<!DOCTYPE html>
<!-- saved from url=(0060)http://whxaxes.github.io/canvas-test/src/3D-demo/3Dtag.html# -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<style>
		.tagBall{
			width: 500px;
			height: 500px;
			margin:50px auto;
			position: relative;
		}
		.tag{
			display: block;
			position: absolute;
			left: 0px;
			top: 0px;
			color: #000;
			text-decoration: none;
			font-size: 15px;
			font-family: "微软雅黑";
			font-weight: bold;
		}
		.tag:hover{border:1px solid #666;}
	</style>
	<title>3D标签云</title>
</head>
<body>
	<div class="tagBall">
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(249, 143, 117); font-size: 11.9907px; opacity: 0.714802; z-index: 79; left: 188.226px; top: 418.382px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(126, 188, 200); font-size: 12.5788px; opacity: 0.78127; z-index: 83; left: 297.144px; top: 425.21px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(29, 178, 178); font-size: 11.0789px; opacity: 0.597807; z-index: 73; left: 324.408px; top: 330.255px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(178, 172, 71); font-size: 10.4665px; opacity: 0.507798; z-index: 69; left: 208.927px; top: 277.855px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(10, 39, 18); font-size: 11.2946px; opacity: 0.627201; z-index: 75; left: 99.6701px; top: 312.888px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(232, 21, 109); font-size: 13.3442px; opacity: 0.858997; z-index: 88; left: 72.29px; top: 391.782px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(219, 73, 254); font-size: 15.6594px; opacity: 1.04785; z-index: 104; left: 155.614px; top: 448.501px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(42, 123, 222); font-size: 16.3302px; opacity: 1.09256; z-index: 108; left: 278.598px; top: 445.821px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(226, 176, 97); font-size: 14.8096px; opacity: 0.985389; z-index: 98; left: 391.274px; top: 380.975px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(44, 30, 30); font-size: 12.7058px; opacity: 0.794816; z-index: 84; left: 417.98px; top: 284.908px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(150, 90, 253); font-size: 11.2451px; opacity: 0.620552; z-index: 74; left: 363.68px; top: 195.997px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(24, 30, 71); font-size: 10.7226px; opacity: 0.546685; z-index: 71; left: 239.493px; top: 150.565px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(79, 187, 100); font-size: 11.1684px; opacity: 0.610145; z-index: 74; left: 115.392px; top: 162.66px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(109, 154, 165); font-size: 12.6759px; opacity: 0.791648; z-index: 84; left: 22.9283px; top: 222.864px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(21, 89, 115); font-size: 15.3758px; opacity: 1.02777; z-index: 102; left: 10.7254px; top: 301.844px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(44, 40, 179); font-size: 18.9523px; opacity: 1.23698; z-index: 126; left: 64.414px; top: 366.987px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(138, 85, 7); font-size: 21.6654px; opacity: 1.3496; z-index: 144; left: 185.8px; top: 390.909px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(226, 57, 101); font-size: 21.1938px; opacity: 1.3321; z-index: 141; left: 308.234px; top: 362.803px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(44, 171, 145); font-size: 18.1699px; opacity: 1.19825; z-index: 121; left: 412.003px; top: 288.691px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(199, 180, 97); font-size: 15.0571px; opacity: 1.00431; z-index: 100; left: 431.565px; top: 191.438px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(112, 81, 38); font-size: 13.0432px; opacity: 0.829522; z-index: 86; left: 380.318px; top: 103.807px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(123, 193, 107); font-size: 12.2768px; opacity: 0.747932; z-index: 81; left: 259.772px; top: 55.5952px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(253, 160, 180); font-size: 12.758px; opacity: 0.800306; z-index: 85; left: 133.362px; top: 63.1007px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(75, 246, 188); font-size: 14.6874px; opacity: 0.975811; z-index: 97; left: 34.1356px; top: 118.904px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(86, 222, 155); font-size: 18.4298px; opacity: 1.21148; z-index: 122; left: 14.2631px; top: 197.697px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(49, 135, 166); font-size: 23.5622px; opacity: 1.41294; z-index: 157; left: 84.7837px; top: 258.427px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(180, 124, 150); font-size: 26.4984px; opacity: 1.4931; z-index: 176; left: 196.091px; top: 268.633px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(190, 129, 226); font-size: 23.693px; opacity: 1.41693; z-index: 157; left: 326.795px; top: 217.912px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(141, 115, 213); font-size: 18.8663px; opacity: 1.23287; z-index: 125; left: 367.564px; top: 125.251px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(94, 108, 176); font-size: 15.936px; opacity: 1.06674; z-index: 106; left: 312.673px; top: 41.9103px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(48, 99, 92); font-size: 15.8145px; opacity: 1.05852; z-index: 105; left: 177.339px; top: 23.1099px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(166, 122, 99); font-size: 19.1053px; opacity: 1.24418; z-index: 127; left: 92.9247px; top: 83.8292px;">3D标签云</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(100, 82, 26); font-size: 24.5511px; opacity: 1.44208; z-index: 163; left: 156.242px; top: 143.253px;">WAXES</a>
		<a class="tag" href="./3D标签云_files/3D标签云.html" style="color: rgb(171, 84, 148); font-size: 21.8061px; opacity: 1.35468; z-index: 145; left: 249.483px; top: 87.8832px;">3D标签云</a>
	</div>
	<script>
		var tagEle = "querySelectorAll" in document ? document.querySelectorAll(".tag") : getClass("tag"),
			paper = "querySelectorAll" in document ? document.querySelector(".tagBall") : getClass("tagBall")[0];
			RADIUS =220,
			fallLength = 500,
			tags=[],
			angleX = Math.PI/500,
		    angleY = Math.PI/500,
			CX = paper.offsetWidth/2,
			CY = paper.offsetHeight/2,
			EX = paper.offsetLeft + document.body.scrollLeft + document.documentElement.scrollLeft,
			EY = paper.offsetTop + document.body.scrollTop + document.documentElement.scrollTop;

		function getClass(className){
			var ele = document.getElementsByTagName("*");
			var classEle = [];
			for(var i=0;i<ele.length;i++){
				var cn = ele[i].className;
				if(cn === className){
					classEle.push(ele[i]);
				}
			}
			return classEle;
		}

		function innit(){
			for(var i=0;i<tagEle.length;i++){
				var a , b;
				var k = -1+(2*(i+1)-1)/tagEle.length;
				var a = Math.acos(k);
				var b = a*Math.sqrt(tagEle.length*Math.PI);
				var x = RADIUS * Math.sin(a) * Math.cos(b);
				var y = RADIUS * Math.sin(a) * Math.sin(b); 
				var z = RADIUS * Math.cos(a);
				var t = new tag(tagEle[i] , x , y , z);
				tagEle[i].style.color = "rgb("+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+")";
				tags.push(t);
				t.move();
			}
		}

		Array.prototype.forEach = function(callback){
			for(var i=0;i<this.length;i++){
				callback.call(this[i]);
			}
		}

		function animate(){
			setInterval(function(){
				rotateX();
				rotateY();
				tags.forEach(function(){
					this.move();
				})
			} , 17)
		}

		if("addEventListener" in window){
			paper.addEventListener("mousemove" , function(event){
				var x = event.clientX - EX - CX;
				var y = event.clientY - EY - CY;
				angleY = x*0.0001;
				angleX = y*0.0001;
			});
		}
		else {
			paper.attachEvent("onmousemove" , function(event){
				var x = event.clientX - EX - CX;
				var y = event.clientY - EY - CY;
				angleY = x*0.0001;
				angleX = y*0.0001;
			});
		}
		
		function rotateX(){
			var cos = Math.cos(angleX);
			var sin = Math.sin(angleX);
			tags.forEach(function(){
				var y1 = this.y * cos - this.z * sin;
				var z1 = this.z * cos + this.y * sin;
				this.y = y1;
				this.z = z1;
			})
			
		}

		function rotateY(){
			var cos = Math.cos(angleY);
			var sin = Math.sin(angleY);
			tags.forEach(function(){
				var x1 = this.x * cos - this.z * sin;
				var z1 = this.z * cos + this.x * sin;
				this.x = x1;
				this.z = z1;
			})
		}

		var tag = function(ele , x , y , z){
			this.ele = ele;
			this.x = x;
			this.y = y;
			this.z = z;
		}

		tag.prototype = {
			move:function(){
				var scale = fallLength/(fallLength-this.z);
				var alpha = (this.z+RADIUS)/(2*RADIUS);
				this.ele.style.fontSize = 15 * scale + "px";
				this.ele.style.opacity = alpha+0.5;
				this.ele.style.filter = "alpha(opacity = "+(alpha+0.5)*100+")";
				this.ele.style.zIndex = parseInt(scale*100);
				this.ele.style.left = this.x + CX - this.ele.offsetWidth/2 +"px";
				this.ele.style.top = this.y + CY - this.ele.offsetHeight/2 +"px";
			}
		}
		innit();
		animate();
	</script>

</body></html>